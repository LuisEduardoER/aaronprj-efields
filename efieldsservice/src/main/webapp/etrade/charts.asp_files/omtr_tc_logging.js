/* Omniture Optimization Suite
 * Copyright (c) Omniture 2001-2008. All rights reserved. Patent Pending.
 * Privacy Policy at http://www.omniture.com/privacy/
 */
/************************** CONFIG SECTION **************************/
/* You may add or alter any code config here. 2/2/09 */

window.tc_l = window.tc_l || {};
tc_l.site_id = tc_l.site_id || 490;
tc_l.log_path = tc_l.log_path || "/javascript/omntr";
/* tc_l.server_hostname = tc_l.server_hostname || "prelive.tcliveus.com"; */
tc_l.server_hostname = tc_l.server_hostname || "etrade.tcliveus.com";

/************************** PLUGINS SECTION *************************/

tc_l.extra_info = tc_l.extra_Info || "";
var tc_s = s || {};
if(typeof(tc_s.events) != "undefined"){
                if (tc_s.events.indexOf('event7') > -1)
                {
                tc_l.extra_info += "newola=1";
                }
}

tc_l.extraInfoFromCookies = "et_segment";             // single cookie
tc_l.extraInfoFromAnalytics = {};	// Capture all fields from SiteCat


/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
window.undefined=window.undefined;window.omtr=window.omtr||{};omtr.extend=function(_1,_2,_3){var _4=_1.split("."),_5=window;if(typeof _3!="boolean"){_3=false;}for(var i=0;i<_4.length;i++){_5[_4[i]]=_5[_4[i]]||{};_5=_5[_4[i]];}for(var _7 in _2){if(_3||typeof _5[_7]=="undefined"){_5[_7]=_2[_7];}}return _5;};omtr.extend("omtr.tc_l.plugin.tc_extra_info_from_cookies",{init:function(_8){omtr.tc_l.debug.trace("omtr.tc_l.plugin.tc_extra_info_from_cookies: init() entered");var _9=_8.extraInfoFromCookies,_a=omtr.tc_l.plugin.tc_extra_info_from_cookies.readCookie;if(typeof _9==="string"){_9=[_9];}if(typeof _9==="undefined"){omtr.tc_l.debug.info("omtr.tc_l.plugin.tc_extra_info_from_cookies.init(): no config, exiting");return _8;}var i,_c,_d="",_e=typeof encodeURIComponent!="undefined"?encodeURIComponent:escape;for(i=0;i<_9.length;i++){_c=_a(_9[i]);if(null!==_c){_d+="&"+_9[i]+"="+_e(_c);}}omtr.tc_l.debug.info("omtr.tc_l.plugin.tc_extra_info_from_cookies.init(): adding '"+_d+"' to extra info");_8.extra_info=(_8.extra_info||"")+_d;},readCookie:function(_f){var _10=_f+"=",_11=document.cookie.split(";"),c;for(var i=0;i<_11.length;i++){c=_11[i];while(c.charAt(0)==" "){c=c.substring(1,c.length);}if(c.indexOf(_10)===0){return c.substring(_10.length,c.length);}}return null;}});omtr.extend("omtr.tc_l.plugin.extra_info_from_analytics",{init:function(_14){omtr.tc_l.debug.trace("omtr.tc_l.plugin.extra_info_from_analytics: init() entered");if(!_14.extraInfoFromAnalytics){omtr.tc_l.debug.info("omtr.tc_l.plugin.extra_info_from_analytics.init(): no config, exiting");return _14;}var _15="",_16=_14.extraInfoFromAnalytics;_14.extra_info=_14.extra_info||"";_16.source=_16.source||omtr.data;_16.propList=_16.propList||window.undefined;if(typeof _16.encode!="boolean"){_16.encode=true;}if(typeof omtr.data==("object")&&typeof omtr.data.serialize==("function")){_15=omtr.data.serialize(_16.propList,_16.encode);omtr.tc_l.debug.info("omtr.tc_l.plugin.extra_info_from_analytics.init(): using partner serialisation, retrieved: "+_15);_14.extra_info+=_15;return _14;}var _17,_18=_16.source,_19=(typeof encodeURIComponent!="undefined"?encodeURIComponent:escape);for(_17 in _18){if((typeof (_18[_17])!=("function"))&&(typeof (_18[_17])!=("array"))&&(typeof (_18[_17])!=("object"))&&(typeof (_18[_17])!=("undefined"))&&((_18[_17])!=(""))&&((_18[_17])!=(null))){_15+="&"+_19(_17.toString())+"="+_19(_18[_17]);}}omtr.tc_l.debug.info("omtr.tc_l.plugin.extra_info_from_analytics.init(): using internal serialisation, retrieved: "+_15);_14.extra_info+=_15;return _14;}});omtr.extend("omtr.tc_l.plugin.sitecatalyst_reporting",{observers:[],ready:false,serveData:null,init:function(_1a){omtr.tc_l.debug.trace("omtr.tc_l.plugin.sitecatalyst_reporting: init() entered");this.doStandardReport=omtr.tc_l.report;omtr.tc_l.report=this.sendReport;},add:function(ele){omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.add(): added listener");this.observers.push(ele);if(omtr.tc_l.plugin.sitecatalyst_reporting.ready){omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.add(): already got data, calling listener");if(typeof (ele)=="function"){ele.apply(this,[omtr.tc_l.serveData]);}}else{omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.add(): no data yet, listener has to wait");}},notify:function(_1c){omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.notify(): calling back to "+this.observers.length+" listeners");for(var i=0;i<this.observers.length;i++){var _1e=this.observers[i];if(typeof (_1e)=="function"){_1e.apply(this,[_1c]);}}},sendReport:function(_1f){omtr.tc_l.debug.trace("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): entered");if(typeof _1f=="object"){omtr.tc_l.debug.trace("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): caching serve data: "+_1f.toString());omtr.tc_l.plugin.sitecatalyst_reporting.serveData=_1f;}else{omtr.tc_l.debug.trace("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): using previously cached serve data");_1f=omtr.tc_l.plugin.sitecatalyst_reporting.serveData;}var _20=omtr.tc_l.plugin.sitecatalyst_reporting.doStandardReport();if((_20===0)||(typeof _20==="undefined"&&!_1f)){omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): not ready or already reported");return;}else{if(_20===2){omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): reporting page default");omtr.tc_l.serveData={visitor:"Page Default"};}else{if(_20===3){omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): reporting page error");omtr.tc_l.serveData={visitor:"Page Error"};}else{if(_1f!==null&&typeof _1f=="object"){omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): reporting serve information from logger");omtr.tc_l.serveData={visitor:_1f.visitor};omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): serveData.visitor set to"+_1f.visitor);}else{omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting.sendReport(): serveData.visitor set to No Data");omtr.tc_l.serveData={visitor:"No Data From Server"};}}}}omtr.tc_l.debug.debug("omtr.tc_l.plugin.sitecatalyst_reporting: sending report(visitor:"+omtr.tc_l.serveData.visitor+")");omtr.tc_l.plugin.sitecatalyst_reporting.ready=true;omtr.tc_l.plugin.sitecatalyst_reporting.notify(omtr.tc_l.serveData);}});omtr.extend("omtr.tc_l",{Version:"5.3",Vendor:"Omniture",Product:"TouchClarity"});(function(){if(!Function.prototype.apply){Function.prototype.apply=function(o,a){var r;if(!o){o={};}o.___apply=this;for(var i=0,s="";i<a.length;i++){if(i!=0){s+=",";}s+="a["+i+"]";}r=eval("o.___apply("+s+")");o.__apply=null;return r;};}if(!Function.prototype.call){Function.prototype.call=function(o){var _27=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++){_27[i-1]=arguments[i];}return this.apply(o,_27);};}if(!Array.prototype.push){Array.prototype.push=function(){for(var i=0;i<arguments.length;i++){this[this.length]=arguments[i];}return this.length;};}Object.hasOwnProperty=(function(){if(Object.prototype.hasOwnProperty){return function(_2a,_2b){return Object.prototype.hasOwnProperty.call(_2a,_2b);};}var _2c={};var _2d="__proto__";if(_2c[_2d]){return function(_2e,_2f){var _30;var _31=_2e[_2d];_2e[_2d]=null;_30=_2e[_2f]?true:false;_2e[_2d]=_31;return _30;};}return function(_32,_33){return _32.constructor&&_32.constructor.prototype[_33]!==_32[_33];};})();var _34=function(){var _35="undefined";var api=this;var _37=window.location;var log=omtr.tc_l.debug||(function(){if(window.log4javascript){var _39=log4javascript.getLogger("omtr.tc_l");_39.setLevel(log4javascript.Level.TRACE);_39.removeAllAppenders();if(window.tc_l.logAppender){_39.addAppender(tc_l.logAppender);}else{if(window.console){var _3a=new log4javascript.BrowserConsoleAppender();_3a.setThreshold(log4javascript.Level.TRACE);_39.addAppender(_3a);}else{_39.addAppender(new log4javascript.PopUpAppender());}}_39.info("Logger created, level is "+_39.getLevel());return _39;}else{if(typeof window.console=="object"){var _3b=window.console;var _3c="[omtr.tc_l] ";_3b.info(_3c+"No log4javascript, using Firebug logger");return {trace:function(msg){_3b.log(_3c+msg);},debug:function(msg){_3b.log(_3c+msg);},info:function(msg){_3b.info(_3c+msg);},warn:function(msg){_3b.warn(_3c+msg);},error:function(msg){_3b.error(_3c+msg);},getLevel:function(){return "trace";}};}else{return {trace:function(msg){},debug:function(msg){},info:function(msg){},warn:function(msg){},error:function(msg){},getLevel:function(){return "none, logging disabled";}};}}})();this.debug=log;var _47={timeout:5,site_id:425,server_hostname:"tagging-qa.touchclarity.com",active:true,base_url:_37.href,products:"",referrer:(function(){if(typeof document.referrer==_35){return _35;}if(document.referrer===null){return "null";}if(document.referrer===""){return "empty";}return document.referrer;})(),log_path:"/touchclarity",containers:new function(){function CampaignContainer(id,_49){this.id=id;this.rendered=false;this.displayed=false;this.defaulted=false;this.error=false;this.content="";this.default_content=_49;this.timeout_id=null;this.coids=[];}var ccs={};this.add=function(_4b){if(ccs[_4b]){return ccs[_4b];}else{var cc=new CampaignContainer(_4b,"");ccs[_4b]=cc;return cc;}};this.get=function(_4d){var cc=ccs[_4d];if(!cc){cc=this.add(_4d);cc.error=true;}return cc;};this.getAll=function(){var _4f=[];for(var id in ccs){if(ccs[id].constructor==CampaignContainer){_4f.push(ccs[id]);}}return _4f;};this.getIDs=function(){var ids=[];for(var id in ccs){if(ccs[id].constructor==CampaignContainer){ids.push(id);}}return ids;};}()};this.configuration=_47;var _53=new function(){var _54=typeof encodeURIComponent!="undefined"?((navigator.vendor&&navigator.vendor.toLowerCase()=="netscape6")?escape:encodeURIComponent):escape;this.getLogURL=function(_55,_56,_57,_58,_59){var _5a=function(url){if(typeof url==_35||url===""||url===null){return _47.base_url;}url=""+url;if(url.substring(0,4)!="http"&&url.substring(0,1)!="/"){url=_37.pathname.substring(0,_37.pathname.lastIndexOf("/")+1)+url;}if(url.substring(0,1)=="/"){url=api.logger.http+_37.host+url;}return url;};var _5c=function(_5d){_5d=(typeof _5d!=_35?_5d:_47.base_url);if(_5d.indexOf("?")>0){_5d=_5d.substring(0,_5d.indexOf("?"));}var al=(_5d!=api.logger.http+_37.host+_37.pathname);return al;};if(typeof _55==_35){_55="i";}_56=_5a(_56);var url=api.logger.http+_47.server_hostname+"/"+_55+"?siteID="+_47.site_id;var _60=new Date().getTime();url+="&ts="+(typeof _58!=_35?_58:_60);var _61=_47.containers.getIDs();if(_61.length>0){for(var cc=0;cc<_61.length;cc++){url+="&ccID="+_54(_61[cc]);}}if(_55=="c"){url+="&log=no";}var al=_5c(_56);if(al){url+="&alias=true";}if(_57&&_57.length){url+="&prod="+_54(_57);}if(typeof _59!=_35){url+=_59;}_56=_54(_56);while(_56.length>1999-url.length){_56=_56.substring(0,_56.lastIndexOf(_54("&")));}url+="&location="+_56;var dg={};dg.tagv=_54(omtr.tc_l.Version);dg.tz=0-(new Date().getTimezoneOffset());dg.r=_54(_47.referrer);dg.title=""+_54(document.title);if(al){dg.aliased=_54(_37.href);}if(screen){dg.cd=screen.colorDepth;dg.ah=screen.availHeight;dg.aw=screen.availWidth;dg.sh=screen.height;dg.sw=screen.width;dg.pd=screen.pixelDepth;}for(var key in dg){if(!Object.hasOwnProperty(dg,key)){continue;}if((typeof (dg[key])!=("function"))&&(typeof (dg[key])!=("array"))&&(typeof (dg[key])!=("object"))){var _66="&"+key+"="+dg[key];if(url.length+_66.length<2000){url+=_66;}else{break;}}}return url;};}();var _67=new function(){var _68;var _69;this.write=function(id,_6b,_6c){if(_6d()){return false;}var _6e=document.getElementById(_6c);if(!_6e){return false;}var _6f="<span id=\"tc_content_"+id+"\" name=\"tc_content_"+id+"\">"+_6b+"</span>";_6e.innerHTML=_6e.innerHTML+_6f;return true;};this.createIframe=function(_70,_71){if(_6d()){return false;}if(typeof document.getElementsByTagName("body")[0]=="undefined"){return false;}var _72=document.getElementsByTagName("body")[0];var _73=_72.firstChild;if(!_69){var _74=_70;var _75=_71;var _76=document.createElement("DIV");_76.id="tc_iframe_container";_76.style.width=_76.style.height=_76.style.border=_76.style.margin=_76.style.padding=0;_76.style.visibility="hidden";var _77="<iframe id=\""+_74+"\" name=\""+_74+"\"></iframe>";_76.innerHTML=_77;if(_72&&_73){_72.insertBefore(_76,_73);}else{return false;}_69={};_69.document={};_69.document.location={};_69.document.location.iframe=document.getElementById(_74);_69.document.location.replace=function(_78){this.iframe.src=_78;};}if(navigator.userAgent.indexOf("Gecko")!=-1&&!_69.document){setTimeout("DOMfactory.createIframe("+_74+", "+_75+")",10);}var _79=_69.document.location.iframe;_79.style.top=_79.style.left=_79.style.width=_79.style.height=_79.style.border=_79.style.margin=_79.style.padding=0;_79.style.zIndex="-1";_79.style.overflow="hidden";_79.style.position="absolute";if(_68){_79.style.filter="alpha(opacity=0)";_79.frameBorder=0;}else{_79.style.opacity="0";}_79.style.visibility="hidden";var _7a=_69.document;_7a.location.replace(_75);return true;};var _6d=function(){var _7b=(!document.getElementById&&!document.all);return _7b;};}();api.DOMfactory=_67;this.logger=new function(){var _7c=this;this.loaded=true;this.http="http"+(_37.href.substring(0,6)=="https:"?"s":"")+"://";var _7d=false;var _7e=false;var _7f=[];var _80=function(_81,url,_83,_84,_85){if(typeof url==_35||url===""){return false;}if(_47.active){var _86=new Image();_86.src=_53.getLogURL("i",_83,_85,new Date().getTime());_7f.push(_86);}if(typeof _84==_35){return window.open(url,_81);}else{return window.open(url,_81,_84);}};var _87=function(_88,_89,_8a){if(!_47.active){return null;}var _8b=new Image();_8b.src=_53.getLogURL("i",_88,_89,new Date().getTime(),_8a);_7f.push(_8b);return _8b;};var _8c=function(_8d,url,_8f,_90,_91,_92){var _93=null;if(typeof url==_35||url===""){return;}if(typeof _92==_35||_92===""){_92="window.location.href='"+url+"'";}if(typeof _8f==_35){_8f=url;}if(typeof _8d==_35||_8d===""||_8d=="_self"||_8d=="_parent"||_8d=="_top"){if(_47.active){_93=new Image();_93.timeout_id=setTimeout(_92,(_47.timeout*1000));_93.onload=function(){eval(_92);clearTimeout(_93.timeout_id);};_93.onerror=function(){eval(_92);clearTimeout(_93.timeout_id);};_93.src=_53.getLogURL("i",_8f,_91,new Date().getTime());_7f.push(_93);}else{eval(_92);}}else{if(typeof _8d=="object"&&_8d.document){if(_47.active){_93=new Image();_93.src=_53.getLogURL("i",_8f,_91);_7f.push(_93);}_8d.location.href=url;}else{_80(_8d,url,_8f,_90,_91);}}};var _94=function(_95){if(_95.containers){return null;}else{var _96=null;if(_47.active&&!_7e){_96=_87();_96.onload=function(){_7d=true;};}_7e=true;return _96;}};this.init=function(_97){if(_7e){return;}if(typeof _97!="object"){if(typeof window.tc=="object"){_97=window.tc;}else{_97={};}}if(_97.active===false||_97.active==="false"||_97.active===0){_47.active=false;}if(_97.site_id){_47.site_id=_97.site_id;}if(_97.server_hostname){_47.server_hostname=_97.server_hostname;}if(_97.page_alias){_47.base_url=_97.page_alias;}if(_97.extra_info){_47.base_url+=(_47.base_url.indexOf("?")>0?"&":"?")+_97.extra_info;}if(_97.timeout){_47.timeout=_97.timeout;}if(_97.products){_47.products=_97.products;}if(_97.referrer){_47.referrer=_97.referrer;}_94(_97);};api.log=_87;api.redirect=_8c;}();this.targeter=new function(){this.loaded=true;this.content_url="";var _98=false;var _99=false;var _9a=function(){return (!document.getElementById&&!document.all);};api.isUnsupportedBrowser=_9a;var _9b=function(){if(_99===true){return 0;}var cc,_9d=_47.containers.getAll(),_9e="",_9f=0,_a0=0,_a1=0;for(var i=0;i<_9d.length;i++){cc=_9d[i];if(cc.error){_9e+="&error="+cc.id;_9f++;}}if(_9f>0){api.log(null,null,_9e);_99=true;return 3;}for(var i=0;i<_9d.length;i++){cc=_9d[i];if(!cc.displayed&&!cc.defaulted){return 0;}if(cc.defaulted){_9e+="&default="+cc.id;_a0++;}else{for(var co=0;co<cc.coids.length;co++){_9e+="&displayed="+cc.coids[co];_a1++;}}}api.log(null,null,_9e);_99=true;var _a4=1;if(_a0>0&&_a1==0){_a4=2;}if(_a0>0&&_a1>0){_a4=3;}return _a4;};api.report=_9b;var _a5=function(_a6){var cc=omtr.tc_l.configuration.containers.get(_a6);if(!cc.displayed){cc.defaulted=true;document.getElementById("tc_content_"+cc.id).innerHTML=cc.default_content;}omtr.tc_l.report();};api.timeoutFunction=_a5;var _a8=function(id,_aa,_ab){var _ac=function(_ad){var _ae=false;if(_ab){_ae=omtr.tc_l.DOMfactory.write(id,_ad,_ab);}if(!_ab||!_ae){if(!_ab){}document.write("<span id='tc_content_"+id+"'>"+_ad+"</span>");return;}};if(omtr.tc_l.isUnsupportedBrowser()){_ac(_aa);return;}var cc=_47.containers.get(id);cc.default_content=_aa;if(_47.active===false){_ac(_aa);}else{if(cc.error===true){_ac(_aa);}else{if(cc.content!==""){if(cc.content=="__default__"){_ac(cc.default_content);}else{_ac(cc.content);}cc.displayed=true;}else{_ac("");cc.rendered=true;if(cc.default_content){(function(){var _cc=cc;_cc.timeout_id=setTimeout("omtr.tc_l.timeoutFunction(\""+_cc.id+"\")",_47.timeout*1000);})();}}}}omtr.tc_l.report();};var _b1=function(_b2,_b3,_b4){var cc=_47.containers.get(_b2);if(cc.defaulted){return;}cc.coids.push(_b3);if(cc.rendered){if(_b4=="__default__"){_b4=cc.default_content;}document.getElementById("tc_content_"+_b2).innerHTML+=_b4;cc.displayed=true;}else{cc.content+=_b4;}};this.init=function(_b6){if(_98){return;}if(typeof _b6.containers=="string"){_47.containers.add(_b6.containers);}else{if(_b6.containers&&_b6.containers.length){for(var i=0;i<_b6.containers.length;i++){_47.containers.add(_b6.containers[i]);}}else{return;}}if(_b6.log_path){_47.log_path=_b6.log_path;}if(_47.active&&!_9a()){var _b8=_b6.test?_b6.test:_53.getLogURL("c");this.content_url="<scr"+"ipt src='"+_b8+"'></scr"+"ipt>";var _b9=_67.createIframe("tc_iframe",_47.log_path+"/tc_targeting.html");if(!_b9){document.writeln("<iframe id='tc_iframe' src='"+_47.log_path+"/tc_targeting.html' width=0 height=0 style='display:none'></iframe>");return;}}_98=true;};api.optimize=_a8;api.set_content=_b1;}();var _ba=function(_bb){if(omtr.tc_l.plugin){for(var _bc in omtr.tc_l.plugin){if(omtr.tc_l.plugin[_bc].init){omtr.tc_l.plugin[_bc].init(_bb);}}}};var _bd=false;this.init=function(_be){if(_bd){return;}if(typeof _be!="object"){if(typeof window.tc_l=="object"){_be=window.tc_l;}else{_be={};}}_ba(_be);this.logger.init(_be);this.targeter.init(_be);_bd=false;};};omtr.extend("omtr.tc_l",new _34());if(window.tc_l&&window.tc_l.autoStart){omtr.tc_l.init(tc_l);}})();