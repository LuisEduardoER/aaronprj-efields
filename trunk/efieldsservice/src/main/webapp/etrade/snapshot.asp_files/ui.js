function EtradeTaskbar(c){if("undefined"===typeof jQuery){var h=arguments.callee;window.setTimeout(function(){h(c)},500);return}if($.browser.msie===true&&parseInt($.browser.version,10)<=6){return}c=c||{};if(typeof c.serviceHost==="undefined"){if(window.page&&window.page.config&&window.page.config.url&&typeof window.page.config.url.ETRADE!=="undefined"){c.serviceHost=window.page.config.url.ETRADE}else{if(typeof window.ETRADE!=="undefined"){c.serviceHost=window.ETRADE}else{c.serviceHost="https://us.etrade.com"}}}if(typeof c.assetHost==="undefined"){if(window.page&&window.page.config&&window.page.config.url&&typeof window.page.config.url.AKAMAI!=="undefined"){c.assetHost=window.page.config.url.AKAMAI}else{if(typeof window.AkamaiURL!=="undefined"){c.assetHost=window.AkamaiURL}else{c.assetHost="https://cdn.etrade.net/1/1d"}}}function a(k,j){var i=k.split("|");$.each(i,function(l,n){var o=n.split(":");var m=o[0];j[m]=o[1]});return j}function e(l){var k=l.length;for(var i=0;i<k;i++){var j=document.createElement("link");j.rel="stylesheet";j.type="text/css";j.href=l[i];document.getElementsByTagName("head")[0].appendChild(j)}}function b(j,k){if(j.length>0){var i=j.splice(0,1);d(i,function(){b(j,k)})}else{if(j.length===0){k()}}}function d(i,k){var j=document.createElement("script");j.src=i||($.browser.msie?"//:0":"javascript:void 0");j.onloadDone=false;j.onload=k;j.onreadystatechange=function(){if(("loaded"===j.readyState||"complete"===j.readyState)&&!j.onloadDone){j.onloadDone=true;j.onload()}};document.getElementsByTagName("head")[0].appendChild(j)}function g(i){i=parseFloat(i).toFixed(4);if(i.substr(i.length-1)==="0"){i=i.substring(0,i.length-1)}if(i.substr(i.length-1)==="0"){i=i.substring(0,i.length-1)}return i}$.ajax({url:c.serviceHost+"/e/t/accounts/gettaskbarsettings.json",dataType:"jsonp",success:function(k,p,m){if("undefined"===typeof k||"undefined"===typeof k.Taskbar_Status_Info){return}if("undefined"!==typeof k.Taskbar_Status_Info.GLOBAL_TASKBAR_FLAG&&"off"===String(k.Taskbar_Status_Info.GLOBAL_TASKBAR_FLAG).toLowerCase()){return}var j=false;if(String(k.Taskbar_Status_Info.ENABLE_TASKBAR_FOR_ALL_USERS).toLowerCase()==="false"&&String(k.Taskbar_Status_Info.TASKBAR_STATUS).toLowerCase()==="on"){j=true}if(String(k.Taskbar_Status_Info.ENABLE_TASKBAR_FOR_ALL_USERS).toLowerCase()==="true"&&String(k.Taskbar_Status_Info.TASKBAR_STATUS).toLowerCase()!=="off"){j=true}if(!j){return}var i={qlaunch:"trade,portfolio,complete",stacked:0,allowAutoRefresh:0,collapsed:0};if(k&&"undefined"!==typeof k.Taskbar_Status_Info&&"undefined"!==typeof k.Taskbar_Status_Info.TASKBAR_SETTINGS){i=a(k.Taskbar_Status_Info.TASKBAR_SETTINGS,i)}var l=[];var o=[];if("undefined"===typeof jQuery.ui){l.push(c.assetHost+"/javascript/jquery/ui/ui.core.min.js");o.push(c.assetHost+"/stylesheet/jquery/ui/themes/smoothness/jquery-ui.css")}if("undefined"===typeof jQuery.widget){l.push(c.assetHost+"/javascript/jquery/ui/ui.widget.min.js")}if("undefined"===typeof jQuery.ui||"undefined"===typeof jQuery.ui.mouse){l.push(c.assetHost+"/javascript/jquery/ui/ui.mouse.min.js")}if("undefined"===typeof jQuery.ui||"undefined"===typeof jQuery.ui.draggable||"undefined"===typeof jQuery().draggable){l.push(c.assetHost+"/javascript/jquery/ui/ui.draggable.min.js")}if("undefined"===typeof jQuery.ui||"undefined"===typeof jQuery.ui.droppable||"undefined"===typeof jQuery().droppable){l.push(c.assetHost+"/javascript/jquery/ui/ui.droppable.min.js")}if("undefined"===typeof jQuery.effects){l.push(c.assetHost+"/javascript/jquery/ui/effects.core.min.js")}if("undefined"===typeof jQuery.effects||"undefined"===typeof jQuery.effects.slide){l.push(c.assetHost+"/javascript/jquery/ui/effects.slide.min.js")}if(o.length>0){e(o)}if(l.length>0){var n=false;b(l,function(){if(n||"undefined"===typeof jQuery.ui||"undefined"===typeof jQuery.widget||"undefined"===typeof jQuery.ui.mouse||"undefined"===typeof jQuery.ui.draggable||"undefined"===typeof jQuery.ui.droppable||"undefined"===typeof jQuery.effects||"undefined"===typeof jQuery.effects){return}n=true;f(i)})}else{f(i)}},error:function(k,i,j){}});function f(j){if(!document.getElementById("theOneAndOnlyTaskbar")){$("body").append("<div id='theOneAndOnlyTaskbar' style='display: none'></div>")}var k={alert:"alerts",balance:"balances",bill:"billpay",complete:"completeview",portfolio:"portfolios",transfer:"quicktransfer",trade:"buysell",orders:"vieworders",watch:"watchlists"};var i={options:{showHideInterval:500,tooltipTimer:500,marketInterval:7000,ulrHost:c.serviceHost,settingsGetService:"/e/t/accounts/gettaskbarsettings.json",settingsSetService:"/e/t/accounts/settaskbarsettings.json",lookupService:"/e/t/invest/FindSymbolStock.json",quoteService:"/e/t/invest/flash.json",globalSnapshot:"/e/t/gmc/globalsnapshot",docked:["trade","portfolio","complete"],stacked:true,collapsed:false,allowAutoRefresh:false,urlMap:{alert:"/e/t/alerts/AlertInbox",balance:"/e/t/accounts/AcctBalanceDetails",bill:"/e/t/accounts/billpay/schedulepayments",complete:"/e/t/accounts/accountscombo",portfolio:"/e/t/pfm/portfolioview",transfer:"/e/t/accounts/acctxfrfundspage",trade:"/e/t/invest/socreateentry",orders:"/e/t/invest/vieworders?view_type=Advanced&order_type=O&order_status=O&fp=xy",watch:"/e/t/pfm/portfolioview"},isMarkupProvided:false},element:document.getElementById("theOneAndOnlyTaskbar"),fallbackUlrHost:"https://us.etrade.com",fullUrlHost:null,fullSettingGetService:null,fullSettingSetService:null,fullLookupService:null,fullQuoteService:null,fullGlobalSnapshot:null,_isLookupInProgress:false,_pauseMarketIndicator:null,_startMarketIndicator:null,_productStack:[],_quoteStack:null,_indexTemplate:null,_fundTemplate:null,_stockTemplate:null,_expandCollapse:null,_quoteErr:null,_markup:"<div class='tsk-inner' ><div class='tsk-piece tsk-left-cap'></div><div class='tsk-piece tsk-middle'><ul class='tsk-base'><li class='tsk-quotes'><div class='tsk-quotes-input'><input type='text' name='quotes' value='Enter Symbol' autocomplete='off'></div></li><li class='tsk-go neo-common-hoverable'></li><li class='tsk-search neo-common-hoverable neo-common-tooltip' title='Symbol Lookup'></li><li class='tsk-dow tsk-sep tsk-market-indic'><div class='neo-common-lbl'>DOW</div><div class='neo-common-vals'><span class='neo-common-val-pct'></span><span class='neo-common-val-pts' style='display: none;'></span><span class='neo-common-val-wait'>-------------</span></div></li><li class='tsk-nasdaq tsk-market-indic'><div class='neo-common-lbl'>NASDAQ</div><div class='neo-common-vals'><span class='neo-common-val-pct'></span><span class='neo-common-val-pts' style='display: none;'></span><span class='neo-common-val-wait'>-----------------</span></div></li><li class='tsk-SandP tsk-market-indic'><div class='neo-common-lbl'>S&P 500</div><div class='neo-common-vals'><span class='neo-common-val-pct'></span><span class='neo-common-val-pts' style='display: none;'></span><span class='neo-common-val-wait'>------------------</span></div></li><li class='tsk-time tsk-sep tsk-market-indic'><div class='neo-common-lbl'><span class='neo-common-val-pct'>Retrieving...</span><span class='neo-common-val-pts' style='display: none;'>Retrieving...</span><span class='neo-common-val-wait'>-----------------------------</span></div></li><li class='tsk-launch-sep tsk-sep'></li><li class='tsk-launch-set-1 tsk-launch-prg neo-common-hoverable neo-common-tooltip'></li><li class='tsk-launch-set-2 tsk-launch-prg neo-common-hoverable neo-common-tooltip'></li><li class='tsk-launch-set-3 tsk-launch-prg neo-common-hoverable neo-common-tooltip'></li><li class='tsk-launch-set-4 tsk-launch-prg neo-common-hoverable tsk-launch-available neo-common-tooltip' title='More Items'></li><li class='tsk-rfrsh tsk-sep neo-common-hoverable neo-common-tooltip' title='Refresh'><div class='tsk-rfrsh-btn tsk-launch-prg'></div></li><li class='tsk-settings tsk-sep neo-common-hoverable neo-common-tooltip' title='Settings'><div class='tsk-settings-btn tsk-launch-prg'></div></li></ul></div><div class='tsk-right-cap tsk-piece neo-common-hoverable neo-common-tooltip' title='Collapse'></div></div><div class='neo-common-tooltip-elm ui-helper-hidden'><div class='neo-common-tooltip-ctn'></div><div class='neo-common-tooltip-btm'></div></div><div class='tsk-block'></div><div class='tsk-quote-stack'><div class='tsk-quote-stack-item tsk-quote-stack-header'><div class='tsk-quote-stack-header-lcap'></div> Quotes <div class='tsk-quote-stack-header-close neo-common-hoverable'></div><div class='tsk-quote-stack-header-rcap'></div></div><div class='tsk-quote-stack-item tsk-quote-stack-stock'><div class='tsk-quote-stack-stock-name'><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-stock-sym'><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-stock-last'><span class='tsk-quote-stack-lbl'>Last</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-stock-change'><span class='tsk-quote-stack-lbl'>Change</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-stock-bid'><span class='tsk-quote-stack-lbl'>Bid</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-stock-ask'><span class='tsk-quote-stack-lbl'>Ask</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-stock-volume'><span class='tsk-quote-stack-lbl'>Volume</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-del neo-common-hoverable'></div></div><div class='tsk-quote-stack-item tsk-quote-stack-fund'><div class='tsk-quote-stack-fund-name'><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-fund-sym'><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-fund-net'><span class='tsk-quote-stack-lbl'>NAV</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-fund-change'><span class='tsk-quote-stack-lbl'>Change</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-fund-offer'><span class='tsk-quote-stack-lbl'>Offer</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-fund-close'><span class='tsk-quote-stack-lbl'>Close</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-del neo-common-hoverable'></div></div><div class='tsk-quote-stack-item tsk-quote-stack-index'><div class='tsk-quote-stack-index-name'><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-index-sym'><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-index-last'><span class='tsk-quote-stack-lbl'>Last</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-index-change'><span class='tsk-quote-stack-lbl'>Change</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-index-volume'><span class='tsk-quote-stack-lbl'>Volume</span><span class='tsk-quote-stack-val'></span></div><div class='tsk-quote-stack-del neo-common-hoverable'></div></div><div class='tsk-quote-stack-err'><div class='tsk-quote-stack-err-block'></div><div class='tsk-quote-stack-err-ctn'><div class='tsk-quote-stack-err-warn'></div><div class='tsk-quote-stack-err-msg'></div><div class='tsk-quote-stack-err-go'>OK</div></div></div></div><form class='tsk-symbol-lookup-panel'><div class='tsk-symbol-lookup-panel-top'><div class='tsk-symbol-lookup-panel-close-btn neo-common-hoverable'></div></div><div class='tsk-symbol-input'><input type='text' name='sym' value='Enter company name' autocomplete='off'></div><div class='tsk-symbol-market'> Market : <select name='market' class='tsk-symbol-market-US'><option class='tsk-symbol-market-US' selected='selected'>US</option><option class='tsk-symbol-market-UK'>UK</option><option class='tsk-symbol-market-JP'>JP</option><option class='tsk-symbol-market-HK'>HK</option><option class='tsk-symbol-market-FR'>FR</option><option class='tsk-symbol-market-DE'>DE</option><option class='tsk-symbol-market-CA'>CA</option></select></div><div class='tsk-symbol-type'> Type: <select name='symbolType'><option selected='selected' value='EQ'>Stock</option><option value='MF'>Mutual Fund</option><option value='INDX'>Index</option></select></div><div class='tsk-symbol-btn neo-common-hoverable'></div><div class='tsk-symbol-results'><div class='tsk-symbol-results-item'><div class='tsk-symbol-results-item-sym'></div><div class='tsk-symbol-results-co'></div><div class='tsk-symbol-results-exch'></div></div></div><div class='tsk-symbol-err'>No results were found for <span class='tsk-symbol-err-lbl'></span></div></form><div class='tsk-symbol-lookup-panel-bottom'></div><div class='tsk-launch-menu-left'></div><ul class='tsk-launch-menu'><li class='tsk-launch-prg tsk-launch-prg-alert neo-common-hoverable'>Alerts</li><li class='tsk-launch-prg tsk-launch-prg-balance neo-common-hoverable'>Balances</li><li class='tsk-launch-prg tsk-launch-prg-bill neo-common-hoverable'>Bill Pay</li><li class='tsk-launch-prg tsk-launch-prg-complete neo-common-hoverable'>Complete View</li><li class='tsk-launch-prg tsk-launch-prg-portfolio neo-common-hoverable'>Portfolios</li><li class='tsk-launch-prg tsk-launch-prg-transfer neo-common-hoverable'>QuickTransfer</li><li class='tsk-launch-prg tsk-launch-prg-trade neo-common-hoverable'>Trading</li><li class='tsk-launch-prg tsk-launch-prg-orders neo-common-hoverable'>View Orders</li><li class='tsk-launch-prg tsk-launch-prg-watch neo-common-hoverable'>Watch Lists</li><li class='tsk-launch-current'><ul><li class='tsk-launch-set-1 tsk-launch-prg neo-common-hoverable'></li><li class='tsk-launch-set-2 tsk-launch-prg neo-common-hoverable'></li><li class='tsk-launch-set-3 tsk-launch-prg neo-common-hoverable'></li><li class='tsk-launch-prg tsk-launch-available neo-common-hoverable'></li></ul></li></ul><div class='tsk-launch-menu-right'></div><div class='tsk-setting-panel'><div class='tsk-setting-close-btn neo-common-hoverable'></div><div class='tsk-stack-quotes'><div class='tsk-stack-quotes-lbl'>Stacked Quotes</div><div class='tsk-stack-quotes-btn'></div></div><div class='tsk-favorites'><div class='neo-common-lbl'>Drag your favorite pages into the taskbar tray below:</div><div class='tsk-favorites-cnt-left'><div class='tsk-launch-prg tsk-launch-prg-alert draggable'>Alerts</div></div><div class='tsk-favorites-cnt'><div class='tsk-launch-prg tsk-launch-prg-transfer draggable'>QuickTransfer</div></div><div class='tsk-favorites-cnt-left'><div class='tsk-launch-prg tsk-launch-prg-balance draggable'>Balances</div></div><div class='tsk-favorites-cnt'><div class='tsk-launch-prg tsk-launch-prg-trade draggable'>Trading</div></div><div class='tsk-favorites-cnt-left'><div class='tsk-launch-prg tsk-launch-prg-bill draggable'>Bill Pay</div></div><div class='tsk-favorites-cnt'><div class='tsk-launch-prg tsk-launch-prg-orders draggable'>View Orders</div></div><div class='tsk-favorites-cnt-left'><div class='tsk-launch-prg tsk-launch-prg-complete draggable'>Complete View</div></div><div class='tsk-favorites-cnt'><div class='tsk-launch-prg tsk-launch-prg-watch draggable'>Watch Lists</div></div><div class='tsk-favorites-cnt-left'><div class='tsk-launch-prg tsk-launch-prg-portfolio draggable'>Portfolios</div></div></div><div class='tsk-taskbar-settings'><div class='droppable'><div class='tsk-drop-target-1 tsk-launch-prg tsk-launch-prg-trade draggable'></div></div><div class='droppable'><div class='tsk-drop-target-2 tsk-launch-prg tsk-launch-prg-portfolio draggable'></div></div><div class='droppable'><div class='tsk-drop-target-3 tsk-launch-prg tsk-launch-prg-complete draggable'></div></div></div></div><div class='tsk-ctx'><div class='tsk-ctx-title'></div><div class='tsk-ctx-btns-sym'><div class='tsk-ctx-sym'></div><div class='tsk-ctx-btns'><div class='tsk-ctx-buy'>Buy</div><div class='tsk-ctx-sell'>Sell</div></div></div><div class='tsk-ctx-graph'><img width='245' height='110' src='"+($.browser.msie?"//:0":"javascript:void 0")+"'></div><div class='tsk-ctx-prc'><div><span class='tsk-ctx-prc-lbl'>Last: </span><span class='tsk-ctx-prc-last'></span><span class='tsk-ctx-prc-lbl'>Change: </span><span class='tsk-ctx-prc-change'></span></div><div><span class='tsk-ctx-prc-lbl'>Real Time Quotes </span><span class='tsk-ctx-prc-lbl tsk-ctx-prc-time'></span></div></div><hr><div class='tsk-ctx-links1'><a class='tsk-ctx-links-chart'>Charts</a><a class='tsk-ctx-links-opt'>Options Chains</a></div><div class='tsk-ctx-links2'><a class='tsk-ctx-links-quote'>Quote Details</a><a class='tsk-ctx-links-news'>News</a></div><div class='tsk-ctx-arrw'></div></div>",_addSymbolToStack:function(l){if(this._productStack.length===7){return false}l=$.trim(l).toUpperCase();if(l===""){return false}if($.inArray(l,this._productStack)<0){this._productStack.push(l);this._setProductsToSession()}return true},_removeSymbolFromStack:function(l){l=$.trim(l).toUpperCase();if(l===""){return true}var m=$.inArray(l,this._productStack);if(m>=0){this._productStack.splice(m,1);this._setProductsToSession();return true}return false},_isSymbolInStack:function(l){l=$.trim(l).toUpperCase();if(l===""){return false}var m=$.inArray(l,this._productStack);return m>=0},_getProductStack:function(){return this._productStack},_clearProductStack:function(){this._productStack=[];this._setProductsToSession()},_btnGo:null,_inQuote:null,_getProductsFromSession:function(){var p=[];var n=document.cookie.split(";");for(var o=0;o<n.length;o++){var q=n[o],m="";while(q.charAt(0)==" "){q=q.substring(1,q.length)}if(q.indexOf("etradeTaskbarProd")==0){m=q.split("=");if(m.length<2){continue}m=m[1].split(",");for(var l=0;l<m.length;l++){if($.trim(m[l])===""){continue}p.push(m[l])}}}return p},_setProductsToSession:function(){var l="";document.cookie="etradeTaskbarProd="+(this._productStack.join(","))+l+"; path=/"},_eraseSessionInfo:function(){var l=new Date();l.setTime(date.getTime()+(-1*24*60*60*1000));var m="; expires="+l.toGMTString();document.cookie="etradeTaskbar="+m+"; path=/"},_create:function(m){var n=$(this.element),l=this;n.addClass("tsk-wrap");this._productStack=this._getProductsFromSession();if("undefined"!==typeof m.stacked){this.options.stacked=!!(parseInt(m.stacked,10))}if("undefined"!==typeof m.collapsed){this.options.collapsed=!!(parseInt(m.collapsed,10))}if("undefined"!==typeof m.allowAutoRefresh){this.options.allowAutoRefresh=!!(parseInt(m.allowAutoRefresh,10))}if("undefined"!==typeof m.qlaunch){this.options.docked=String(m.qlaunch).split(",")}if(this.options.isMarkupProvided===false){n.append(this._markup)}if(this.options.stacked){n.addClass("tsk-quote-stacked-on")}n.attr({style:""}).css({display:"none"});this._initTaskbar();this._initHovers();this._initTooltips();this._initQuotes();this._initMarketIndicators();this._initPanels();this._initDnD();this._initStackBtn();this._confQuickLaunch(this.options.docked,".tsk-launch-set-");this._confQuickLaunch(this.options.docked,".tsk-drop-target-");this._quickLaunchClicks();this._initSymbolLookup();this._initQuoteStack();this._initRefresh();n.css({display:""});if(l.options.collapsed===true){l._setTaskbarStateHidden();n.addClass("tsk-collapsed")}else{l._setTaskbarStateShown();n.removeClass("tsk-collapsed")}},destroy:function(){$(this.element).empty()},_initTaskbar:function(){var r=this,t=$(this.element),l=this.options;var s=$(".tsk-inner",t);this._expandCollapse=$(".tsk-right-cap",s);if(s.length<=0||this._expandCollapse.length<=0){return}if(l.ulrHost===null){if(typeof window.ETRADE!=="undefined"){this.fullUrlHost=window.ETRADE}else{this.fullUrlHost=this.fallbackUlrHost}}else{this.fullUrlHost=l.ulrHost}function n(w){return(w.indexOf("http:")===0||w.indexOf("https:")===0)}function m(w){if(n(w)){return w}else{if(w.indexOf("/")===0){return r.fullUrlHost+w}return r.fullUrlHost+"/"+w}}this.fullSettingGetService=m(l.settingsGetService);this.fullSettingSetService=m(l.settingsSetService);this.fullLookupService=m(l.lookupService);this.fullQuoteService=m(l.quoteService);this.fullGlobalSnapshot=m(l.globalSnapshot);function q(){var w=($(window).width()-965)/2;if(w<0){w=0}t.css({left:w+"px"})}$(window).resize(q);q();function v(){r._setTaskbarStateHidden();var w={distance:934,mode:"hide"};s.effect("slide",w,l.showHideInterval,function(){p()})}function u(){p();var w={mode:"show"};s.effect("slide",w,500,function(){r._setTaskbarStateShown()})}function p(){s.show();t.toggleClass("tsk-collapsed");r.saveSettings()}function o(){r._hideTooltip();if(t.hasClass("tsk-collapsed")){u()}else{v()}return false}this._expandCollapse.click(o)},_setTaskbarStateHidden:function(){this._pauseMarketIndicator();this._quoteStack.addClass("ui-helper-hidden");this._expandCollapse.attr({etitle:"Expand"})},_setTaskbarStateShown:function(){var l=this;this._quoteStack.removeClass("ui-helper-hidden");this._expandCollapse.attr({etitle:"Collapse"});this._refreshQuotes(this._getProductStack(),function(m){l._startMarketIndicator()})},_writeTooltips:function(){var l=$(".neo-common-tooltip",this.element);l.each(function(m,p){var o=$(p);var n=o.attr("title");o.removeAttr("title");o.attr({etitle:n})});return l},_getTooltipForClass:function(l){return $(".tsk-launch-menu ."+l,this.element).html()},_initHovers:function(){$(".neo-common-hoverable",this.element).bind("mouseenter mouseleave",function(){$(this).toggleClass("tsk-state-hover")})},_hideTooltip:function(){},_initTooltips:function(){var l=this,r=this.element,m=this.options;var p=this._writeTooltips();var o=$(".neo-common-tooltip-elm",r);if(p.length<=0||o.length<=0){return}var n=$(".neo-common-tooltip-ctn",o);var q=null;this._hideTooltip=function(){o.addClass("ui-helper-hidden")};p.mouseenter(function(){if(q){window.clearTimeout(q);q=null}var s=$(this);var t=$.trim(s.attr("etitle")).replace(" ","&nbsp;");if(t===""){return}q=window.setTimeout(function(){n[0].innerHTML=t;o.css({left:(s.position().left)+"px"});o.removeClass("ui-helper-hidden")},m.tooltipTimer)});p.mouseleave(function(){if(q){window.clearTimeout(q);q=null}l._hideTooltip()})},_initQuotes:function(){var l=this,q=this.element,m=this.options;var n=$(".tsk-quotes input",q);var o=$(".tsk-go",q);this._btnGo=o;this._inQuote=n;this._quoteErr=$(".tsk-quote-stack-err-msg",q);$(".tsk-quote-stack-err-go",q).click(function(){l._clearQuotesError()});var p=$.trim(n[0].value);n.focus(function(){if($.trim(this.value)===p){this.value=""}});n.blur(function(){if($.trim(this.value)===""){this.value=p;o.removeClass("neo-common-hoverable")}else{o.addClass("neo-common-hoverable")}});n.keyup(function(r){if($.trim(this.value)===""){o.removeClass("neo-common-hoverable")}else{o.addClass("neo-common-hoverable");if(r.keyCode===13){o.click()}}});o.click(function(t){if($(this).hasClass("neo-common-hoverable")){n.focus();n.select();if(!l.options.stacked){l._clearProductStack()}var A=false;var u=false;var z=[];var y=n.val().split(",");$.each(y,function(s,B){var x=$.trim(y[s]).split(" ");$.merge(z,x)});var v=z.length;if(v>7){v=7;u=true}else{if(l._getProductStack().length>=7){u=true}}for(var r=0;r<v;r++){if(l._addSymbolToStack(z[r])){A=true}}if(A){var w=s_gi(s_account);w.linkTrackVars="prop41";w.prop41=A>1?"Multi-Quote":"Single Quote";w.tl(this,"o","Taskbar");l._refreshQuotes(l._getProductStack(),function(C){var x=[];if(C.badSym!==""){var s=String(C.badSym).split(",");var B=s.length;for(r=0;r<B;r++){l._removeSymbolFromStack(s[r])}x.push("The following symbols are invalid: "+C.badSym+".")}if(u===true){x.push("Please Note: You can only lookup 7 quotes at a time.")}if(x.length>0){l._showQuotesError(x.join("<br>"))}})}else{if(u===true){l._showQuotesError("Please Note: You can only lookup 7 quotes at a time.")}}}});o.removeClass("neo-common-hoverable")},_initMarketIndicators:function(){var l=this,s=this.element,m=this.options;var p=$("li.tsk-dow .neo-common-vals",s).add($("li.tsk-nasdaq .neo-common-vals",s)).add($("li.tsk-SandP .neo-common-vals",s));var r=$("li.tsk-time",s);function o(){p.each(function(t){q(this)});q(r)}function q(t){$("span.neo-common-val-pct",t).toggle();$("span.neo-common-val-pts",t).toggle()}$("li.tsk-dow .neo-common-lbl",s).click(function(){document.location.href=l.options.ulrHost+"/e/t/invest/wsoddirect?taskbar=wsod_markets&wsod_page=/v1/stocks/snapshot/snapshot.asp?symbol=DJIND"});$("li.tsk-nasdaq .neo-common-lbl",s).click(function(){document.location.href=l.options.ulrHost+"/e/t/invest/wsoddirect?taskbar=wsod_markets&wsod_page=/v1/stocks/snapshot/snapshot.asp?symbol=COMP.IDX"});$("li.tsk-SandP .neo-common-lbl",s).click(function(){document.location.href=l.options.ulrHost+"/e/t/invest/wsoddirect?taskbar=wsod_markets&wsod_page=/v1/stocks/snapshot/snapshot.asp?symbol=SPX"});p.click(function(){l._pauseMarketIndicator();p.each(function(t){q(this)});l._startMarketIndicator()});r.click(function(){l._pauseMarketIndicator();q(r);l._startMarketIndicator()});var n=null;this._pauseMarketIndicator=function(){if(n){window.clearInterval(n)}n=null};this._startMarketIndicator=function(){if(n){return}n=window.setInterval(function(){o()},m.marketInterval)}},_initPanels:function(){var l=this,p=$(this.element),m=this.options;function o(u,t,v,s,r){function q(){p.removeClass(u)}$(t).click(function(w){l._hideTooltip();p.addClass(u);w.stopPropagation();if(u==="tsk-quick-launch-displayed"){var x=s_gi(s_account);x.linkTrackVars="prop41";x.prop41="Menu Accessed";x.tl(this,"o","Taskbar")}});$(s).click(function(w){if(p.hasClass(u)){w.stopPropagation()}});$(v).click(function(w){w.stopPropagation();q()});if(r){$(document).click(q)}}o("tsk-quick-launch-displayed",".tsk-launch-available",".tsk-launch-current .tsk-launch-available",".tsk-launch-menu",true);o("tsk-settings-displayed",".tsk-settings",".tsk-setting-close-btn",".tsk-setting-panel",false);var n=$(".tsk-setting-close-btn",this.element);n.click(function(r){var u=[];for(var q=0;q<3;q++){var v=$(".tsk-drop-target-"+(q+1),l.element);var t=v.attr("class");var s=l.getLaunchProgramClassName(t).bare;u.push(s)}$(".tsk-setting-panel",this.element).trigger({type:"settings-closed",progs:u})});$(".tsk-setting-panel",this.element).bind("settings-closed",function(q){l.options.docked=q.progs;l._confQuickLaunch(q.progs,".tsk-launch-set-");if(l.options.stacked){p.addClass("tsk-quote-stacked-on")}else{p.removeClass("tsk-quote-stacked-on")}l.saveSettings()})},saveSettings:function(){var l=["stacked:"+(this.options.stacked?"1":"0"),"qlaunch:"+this.options.docked.join(","),"collapsed:"+($(this.element).hasClass("tsk-collapsed")?"1":"0")];$.ajax({data:{new_setting:l.join("|")},dataType:"jsonp",url:this.fullSettingSetService})},getLaunchProgramClassName:function(o){var m={program:"",drop:"",bare:""};var n=o.split(" ");for(var l=0;l<n.length;l++){if(n[l].length>15&&n[l].substring(0,15)==="tsk-launch-prg-"){m.program=n[l];m.bare=n[l].substring(15)}else{if(n[l].length===17&&n[l].substring(0,16)==="tsk-drop-target-"){m.drop=n[l]}}}return m},_initDnD:function(){var p=this.element,n=this;$(".draggable",this.element).draggable({cursor:"crosshair",helper:"clone",opacity:0.8,scroll:false,zIndex:99999,appendTo:".tsk-setting-panel",cursorAt:{left:10,top:10},start:function(q,r){if($(this).hasClass("tsk-launch-docked")){return false}},drag:function(q,r){r.helper.html("").addClass("tsk-launch-prg-helper")}});$(".droppable",this.element).droppable({hoverClass:"tsk-state-hover",accept:".tsk-setting-panel .tsk-launch-prg",drop:function(r,t){var q=$(this).find(".tsk-launch-prg");if(q.length===0){return false}var s=n.getLaunchProgramClassName(q[0].className);var u=s.program;var v=n.getLaunchProgramClassName(t.draggable[0].className).program;if($(t.draggable).parent(".droppable").length>0){q.removeClass(u).addClass(v);$(t.draggable).removeClass(v).addClass(u)}else{q[0].className="tsk-launch-prg draggable "+v;$(t.draggable).addClass("tsk-launch-docked");if(u!==""){$(".tsk-favorites ."+u,p).removeClass("tsk-launch-docked");q.addClass(s.drop)}}}});var o=this.options.docked;for(var m=0;m<3;m++){var l=$(".tsk-favorites .tsk-launch-prg-"+o[m],this.element);l.addClass("tsk-launch-docked")}},_initStackBtn:function(){var l=this.options,n=this.element;var m=$(".tsk-stack-quotes-btn",n);m.click(function(p){var o=$(this);if(o.hasClass("tsk-stack-quotes-btn-on")){o.removeClass("tsk-stack-quotes-btn-on");l.stacked=false}else{o.addClass("tsk-stack-quotes-btn-on");l.stacked=true}});if(l.stacked){m.addClass("tsk-stack-quotes-btn-on")}},_confQuickLaunch:function(q,o){for(var m=0;m<3;m++){if(q[m]===null||q[m]===""){continue}var l=$(o+(m+1),this.element);var r=this.getLaunchProgramClassName(l.attr("class"));var n="tsk-launch-prg-"+q[m];if(n===r.program){continue}l.removeClass(r.program);l.addClass(n);if(l.hasClass("neo-common-tooltip")){var p=this._getTooltipForClass(n);l.attr({etitle:p})}}},_quickLaunchClicks:function(){var l=this,o=this.element,m=this.options;var n=$(".tsk-base .tsk-launch-prg",this.element).add($(".tsk-launch-menu .tsk-launch-prg"));n.click(function(q){var p=l.getLaunchProgramClassName(this.className);if(p.bare){var s=m.urlMap[p.bare];if(s){var r=document.location;if(s.substring(0,4)!=="http"){s=m.ulrHost+s}s+=s.indexOf("?")>-1?"&":"?";s+=k[p.bare]+"_";s+=$(this).closest(".tsk-launch-menu").length?"m":"ql";if(String(p.bare).toLowerCase()==="alert"){window.open(s,"ETRADE","width=604,height=400,toolbar=no,location=no,scrollbars=1,menubar=no,resizable=1,top=5,left=5")}else{document.location.href=s}}}})},_initSymbolLookup:function(){var s=this,z=this.element,F=this.options;var w=$(".tsk-search",z);var A=$(".tsk-symbol-lookup-panel",z);w.click(function(G){s._hideTooltip();A.animate({top:"-53px"},500,"linear",function(){});$(z).addClass("tsk-symbol-lookup-displayed")});var o=$(".tsk-symbol-results",z).css({height:"0px"});var q=$(".tsk-symbol-results .tsk-symbol-results-item",z);q.remove();var x=$(".tsk-symbol-err",z);var r=$(".tsk-symbol-err-lbl",x);x.remove();var m=$(".tsk-symbol-input input",z),B=$(".tsk-symbol-type select",z),l=$(".tsk-symbol-market select",z);function E(M,L,N){if("undefined"===typeof M.Result||(!$.isArray(M.Result)&&!$.isPlainObject(M.Result))){C(M,L,N);return}o.empty();var I=document.createDocumentFragment();if($.isPlainObject(M.Result)){M.Result=[M.Result]}var H=M.Result.length;for(var G=0;G<H;G++){var K=M.Result[G];var J=$(q.clone(true));J.attr({prodId:K.symbol});$(".tsk-symbol-results-item-sym",J).text(K.symbol);$(".tsk-symbol-results-co",J).html(K.sym_desc);$(".tsk-symbol-results-exch",J).text(K.exchange_code);I.appendChild(J[0])}o.append(I.cloneNode(true));A.removeClass("tsk-symbol-show-err");u(H)}function u(H){var I=H*21;if(I>210){I=210}var G=(53+I)*-1;A.animate({top:G+"px"},500,"linear");o.animate({height:I+"px"},500,"linear")}function C(I,G,H){A.addClass("tsk-symbol-show-err");o.empty().append(x);if("undefined"!==typeof I&&"undefined"!==typeof I.InputParams&&"undefined"!==typeof I.InputParams.search){r.text(I.InputParams.search)}else{r.text("your search.")}u(2)}function n(){var G={type_code:B.val().toUpperCase(),search:m.val(),country:l.val().toUpperCase()};m.focus();m.select();$.ajax({data:G,dataType:"jsonp",url:s.fullLookupService,success:E,error:C})}function D(){A.animate({top:"5px"},500,"linear",function(){$(s.element).removeClass("tsk-symbol-lookup-displayed");A.removeClass("tsk-symbol-show-err")})}var t=$(".tsk-symbol-lookup-panel-close-btn",z);t.click(function(G){D()});A.submit(function(G){G.preventDefault();n();return false});var v=$(".tsk-symbol-btn",z).removeClass("neo-common-hoverable");v.click(function(){if($(this).hasClass("neo-common-hoverable")){n()}});var y=$.trim(m[0].value);m.focus(function(){if($.trim(this.value)===y){this.value=""}});m.blur(function(){if($.trim(this.value)===""){this.value=y;v.removeClass("neo-common-hoverable")}});m.keyup(function(G){if($.trim(this.value)===""){v.removeClass("neo-common-hoverable")}else{v.addClass("neo-common-hoverable");if(G.keyCode===13){n();G.stopPropagation()}}});var p=$(".tsk-symbol-results",this.element);p.delegate(".tsk-symbol-results-item","mouseenter",function(){$(this).addClass("tsk-state-hover")}).delegate(".tsk-symbol-results-item","mouseleave",function(){$(this).removeClass("tsk-state-hover")}).delegate(".tsk-symbol-results-item","click",function(){D();m.val("").blur();var H=$(".tsk-symbol-results-item-sym",this).text();var G=String($(".tsk-symbol-market select option:selected",z).val()).toLowerCase();if(G==="us"){s._inQuote.val(H).keyup();s._btnGo.click()}else{window.open(s.fullGlobalSnapshot+"?sym="+H+"&country="+G,"_globalquote")}});B.val("EQ").attr({disabled:false});l.change(function(){var G=this;$("option:selected",this).each(function(){G.className=this.className;if(this.className!=="tsk-symbol-market-US"){B.val("EQ");B.attr({disabled:true})}else{B.attr({disabled:false})}})}).val("US")},_initQuoteStack:function(){var q=this,D=this.element,s=null,z=null,G=null,y=null;G=$(".tsk-ctx",D).addClass("ui-helper-hidden").remove();$("body").append(G);var J=G.find(".tsk-ctx-title");var A=G.find(".tsk-ctx-sym");var r=G.find(".tsk-ctx-graph");var I=G.find(".tsk-ctx-graph img");var t=G.find(".tsk-ctx-buy");var E=G.find(".tsk-ctx-sell");var p=G.find(".tsk-ctx-prc-last");var l=G.find(".tsk-ctx-prc-change");var o=G.find(".tsk-ctx-prc-time");var x=G.find(".tsk-ctx-links-chart").click(function(K){K.preventDefault();document.location.href=q.options.ulrHost+"/e/t/invest/wsoddirect?taskbar=chart_quote&wsod_page=/v1/stocks/charts/charts.asp?symbol="+y});var v=G.find(".tsk-ctx-links-opt").click(function(K){K.preventDefault();document.location.href=q.options.ulrHost+"/e/t/invest/quotesandresearch?taskbar=options_quote&content=3&site=quotesandresearch&ah_flag=&tabview=1&optionview=2&sym="+y});var u=G.find(".tsk-ctx-links-quote").click(function(K){K.preventDefault();document.location.href=q.options.ulrHost+"/e/t/invest/wsoddirect?taskbar=details_quote&wsod_page=/v1/stocks/snapshot/snapshot.asp?symbol="+y});var n=G.find(".tsk-ctx-links-news").click(function(K){K.preventDefault();document.location.href=q.options.ulrHost+"/e/t/invest/wsoddirect?taskbar=news_quote&wsod_page=/v1/stocks/news/search_results.asp?symbol="+y});this._quoteStack=$(".tsk-quote-stack",D);this._indexTemplate=this._quoteStack.find(".tsk-quote-stack-index");this._indexTemplate.remove();this._fundTemplate=this._quoteStack.find(".tsk-quote-stack-fund");this._fundTemplate.remove();this._stockTemplate=this._quoteStack.find(".tsk-quote-stack-stock");this._stockTemplate.remove();$(".tsk-quote-stack-header-close",this._quoteStack).click(function(){q._clearProductStack();q._clearQuotesError();q._animateQuoteStack(0,function(){var K=q._getQuotesInStack();$.each(K,function(L,M){M.remove()})})});function F(){if(s){window.clearTimeout(s);s=null}if(z){window.clearTimeout(z);z=null}}function C(N){y=N.attr("sym");J.html(N.attr("desc"));A.text(y+" : "+N.attr("idx"));I[0].src=$.browser.msie?"//:0":"javascript:void 0";r.addClass("tsk-ctx-graph-loading");var K=new Image();var O="https://www.etrade.wallst.com/services/mobilechart/chart.asp?d=365&w=245&h=110&rt=1&symbol="+y;K.src=O;K.onload=function(){I[0].src=O;r.removeClass("tsk-ctx-graph-loading")};var M="";var L="";if(N.is(".tsk-quote-stack-fund")){M=".tsk-quote-stack-fund-last .tsk-quote-stack-val";L=".tsk-quote-stack-fund-change .tsk-quote-stack-val";t.css({visibility:""}).click(function(P){document.location.href=q.options.ulrHost+"/e/t/mftrading/mfbuy?taskbar=buy_quote&symbol="+y});E.css({visibility:""}).click(function(P){document.location.href=q.options.ulrHost+"/e/t/mftrading/mfsell?taskbar=sell_quote&symbol="+y});u.css({visibility:""});n.css({visibility:"hidden"});v.css({visibility:"hidden"});x.css({visibility:""})}else{if(N.is(".tsk-quote-stack-index")){M=".tsk-quote-stack-index-last .tsk-quote-stack-val";L=".tsk-quote-stack-index-change .tsk-quote-stack-val";t.css({visibility:"hidden"});E.css({visibility:"hidden"});u.css({visibility:""});n.css({visibility:""});v.css({visibility:""});x.css({visibility:""})}else{M=".tsk-quote-stack-stock-last .tsk-quote-stack-val";L=".tsk-quote-stack-stock-change .tsk-quote-stack-val";t.css({visibility:""}).click(function(P){document.location.href=q.options.ulrHost+"/e/t/invest/socreateentry?ordertype=1&symbol="+y});E.css({visibility:""}).click(function(P){document.location.href=q.options.ulrHost+"/e/t/invest/socreateentry?ordertype=2&symbol="+y});u.css({visibility:""});n.css({visibility:""});v.css({visibility:""});x.css({visibility:""})}}p.text(N.find(M).text());l.text(N.find(L).text());o.text($(D).find(".tsk-time .neo-common-val-pts").text())}function H(){t.unbind();E.unbind();I[0].src=$.browser.msie?"//:0":"javascript:void 0"}function m(L){var K=$(this);F();s=window.setTimeout(function(){C(K.parent("div"));var N=K.offset().top-260;var M=L.pageX;G.css({top:N,left:M}).removeClass("ui-helper-hidden")},500)}function B(K){F();z=window.setTimeout(function(){G.addClass("ui-helper-hidden");H()},500)}function w(K){var L=$(this).parent("div").attr("sym");document.location.href=q.options.ulrHost+"/e/t/invest/wsoddirect?taskbar=wsod_snapshot&wsod_page=/v1/stocks/snapshot/snapshot.asp?symbol="+L}this._quoteStack.delegate(".tsk-quote-stack-del","click",function(){var K=$(this).parent();q._removeSymbolFromStack(K.attr("sym"));q._animateQuoteStack(q._quoteStack.children("div.tsk-quote-stack-item").length-1,function(){K.remove()})}).delegate(".tsk-quote-stack-stock-name","mouseenter",m).delegate(".tsk-quote-stack-stock-name","mouseleave",B).delegate(".tsk-quote-stack-stock-name","click",w).delegate(".tsk-quote-stack-stock-sym","mouseenter",m).delegate(".tsk-quote-stack-stock-sym","mouseleave",B).delegate(".tsk-quote-stack-stock-sym","click",w).delegate(".tsk-quote-stack-index-name","mouseenter",m).delegate(".tsk-quote-stack-index-name","mouseleave",B).delegate(".tsk-quote-stack-index-name","click",w).delegate(".tsk-quote-stack-index-sym","mouseenter",m).delegate(".tsk-quote-stack-index-sym","mouseleave",B).delegate(".tsk-quote-stack-index-sym","click",w).delegate(".tsk-quote-stack-fund-name","mouseenter",m).delegate(".tsk-quote-stack-fund-name","mouseleave",B).delegate(".tsk-quote-stack-fund-name","click",w).delegate(".tsk-quote-stack-fund-sym","mouseenter",m).delegate(".tsk-quote-stack-fund-sym","mouseleave",B).delegate(".tsk-quote-stack-fund-sym","click",w);G.mouseenter(function(){F()}).mouseleave(function(){F();z=window.setTimeout(function(){G.addClass("ui-helper-hidden")},500)})},_initRefresh:function(){var l=this;$(".tsk-rfrsh-btn",this.element).click(function(m){l._refreshQuotes(l._getProductStack())})},_refreshQuotes:function(u,x){var t=this,w=this.element,m=this.options;function l(B,C,G){t._isLookupInProgress=false;var I=null,H="",D="",z={};if("undefined"===typeof B.product){s(B,C,G);return}var A=B.product.length;for(var E=0;E<A;E++){var y=B.product[E];var F=$.trim(String(y.symbol)).toUpperCase();if(F==="COMP.IDX"){p(y,$(".tsk-nasdaq",w));if(t._isSymbolInStack(F)){z[F]=y}}else{if(F==="DJIND"){p(y,$(".tsk-dow",w));if(t._isSymbolInStack(F)){z[F]=y}}else{if(F==="SPX"){p(y,$(".tsk-SandP",w));if(t._isSymbolInStack(F)){z[F]=y}}else{z[F]=y}}}if(I===null&&"undefined"!==typeof y.flashtimestring){I=y.flashtimestring}if(D===""){if("undefined"!==typeof y.ah_flag&&(y.ah_flag===true||y.ah_flag==="true")){D="Market Closed"}else{if("undefined"!==typeof y.quote_type){if(parseInt(y.quote_type,10)===0){D="Real Time Quotes"}else{D="Delayed Quotes"}}}}}t._pauseMarketIndicator();t._updateTimestamp(I,H,D);t._updateQuoteStack(z);$(w).removeClass("tsk-refresh-progress");$("neo-common-val-pct",w).css({display:null});$("neo-common-val-pts",w).css({display:"none"});t._startMarketIndicator()}function p(A,z){var y=parseFloat(A.change);if(y>0){z.addClass("tsk-value-inc").removeClass("tsk-value-dec")}else{if(y<0){z.addClass("tsk-value-dec").removeClass("tsk-value-inc")}else{z.removeClass("tsk-value-dec").removeClass("tsk-value-inc")}}z.find(".neo-common-val-pct").text(g(A.change)+" ("+A.percent_change+"%)");z.find(".neo-common-val-pts").text(g(A.price))}function s(A,y,z){}window.clearTimeout(t._timeoutAutoRefresh);var r=s;var o=l;var v={badSym:""};if("function"===typeof x){o=function(y,z,A){l(y,z,A);if(y&&"undefined"!==typeof y["invest.flashinfo"]&&"undefined"!==typeof y["invest.flashinfo"].bad_symbols&&""!==y["invest.flashinfo"].bad_symbols){v.badSym=y["invest.flashinfo"].bad_symbols}x(v)};r=function(y,z,A){s(y,z,A);x(v)}}if(!t._isLookupInProgress){t._isLookupInProgress=true;$(w).addClass("tsk-refresh-progress");t._pauseMarketIndicator();var n={};var q=["comp.idx","djind","spx"];if(u&&u.length>0){$.merge(q,u)}n.sym=q.join(",");$.ajax({data:n,dataType:"jsonp",url:t.fullQuoteService,success:o,error:r})}if(t.options.allowAutoRefresh===true){t._timeoutAutoRefresh=window.setTimeout(function(){t._refreshQuotes(t._getProductStack())},7000)}},_showQuotesError:function(m){$(this.element).addClass("tsk-quote-show-error");this._quoteErr.text(m);var l=this._quoteStack.position().top;if(l>-75){this._animateQuoteStack(3,null)}},_clearQuotesError:function(){var l=this;this._animateQuoteStack(this._quoteStack.children("div.tsk-quote-stack-item").length,function(){$(l.element).removeClass("tsk-quote-show-error");l._quoteErr.text("")})},_updateTimestamp:function(l,n,m){$(".tsk-time .neo-common-val-pct",this.element).text(m);$(".tsk-time .neo-common-val-pts",this.element).text(l)},_pad:function(m,l){m=String(m);l=l||2;while(m.length<l){m="0"+m}return m},_updateQuoteStack:function(p){var q=this;var t=this._getQuotesInStack();var s=this._getProductStack();var o=s.length;for(var r=0;r<o;r++){var n=s[r];if(typeof t[n]==="undefined"){if(typeof p[n]==="undefined"){continue}this._addElmToQuoteStack(p[n])}else{this._updateElmInQuoteStack(p[n],t[n]);delete t[n]}}var l=0;var u=null;if(!this.options.stacked){$.each(t,function(v,w){w.appendTo(this._quoteStack);l++});u=function(){$.each(t,function(v,w){w.remove()})}}var m=this._quoteStack.children("div.tsk-quote-stack-item:visible").length-l;if(m>1){this._animateQuoteStack(m,u)}},_animateQuoteStack:function(m,o){if(m===1){m=0}var n="25px";if(m>0){var l=-23;if($.browser.msie===true){l=-24}n=((m*l)+25)+"px"}this._quoteStack.animate({top:n},500,"linear",o)},_addElmToQuoteStack:function(l){var m=null;var n=String(l.quote_type_code).toLowerCase();if(n==="indx"){m=$(this._indexTemplate.clone(true))}else{if(n==="mf"||n==="mmf"){m=$(this._fundTemplate.clone(true))}else{m=$(this._stockTemplate.clone(true))}}this._updateElmInQuoteStack(l,m);m.attr({sym:l.symbol,idx:l.exchange_code,desc:l.sym_desc});this._quoteStack.append(m)},_updateElmInQuoteStack:function(l,m){var n=String(l.quote_type_code).toLowerCase();if(n==="indx"){m.find("div.tsk-quote-stack-index-name span.tsk-quote-stack-val").text(this._trimCompanyName(l.sym_desc));m.find("div.tsk-quote-stack-index-sym span.tsk-quote-stack-val").text("("+l.symbol+")");m.find("div.tsk-quote-stack-index-last span.tsk-quote-stack-val").text(g(l.price));m.find("div.tsk-quote-stack-index-change span.tsk-quote-stack-val").text(g(l.change)+" ("+l.percent_change+"%)");m.find("div.tsk-quote-stack-index-volume span.tsk-quote-stack-val").text(l.volume)}else{if(n==="mf"||n==="mmf"){m.find("div.tsk-quote-stack-fund-name span.tsk-quote-stack-val").text(this._trimCompanyName(l.sym_desc));m.find("div.tsk-quote-stack-fund-sym span.tsk-quote-stack-val").text(" ("+l.symbol+")");m.find("div.tsk-quote-stack-fund-net span.tsk-quote-stack-val").text(g(l.price));m.find("div.tsk-quote-stack-fund-change span.tsk-quote-stack-val").text(g(l.change)+" ("+l.percent_change+"%)");m.find("div.tsk-quote-stack-fund-offer span.tsk-quote-stack-val").text(g(l.ask));m.find("div.tsk-quote-stack-fund-close span.tsk-quote-stack-val").text(g(l.close))}else{m.find("div.tsk-quote-stack-stock-name span.tsk-quote-stack-val").text(this._trimCompanyName(l.sym_desc));m.find("div.tsk-quote-stack-stock-sym span.tsk-quote-stack-val").text(" ("+l.symbol+")");m.find("div.tsk-quote-stack-stock-last span.tsk-quote-stack-val").text(g(l.price));m.find("div.tsk-quote-stack-stock-change span.tsk-quote-stack-val").text(g(l.change)+" ("+l.percent_change+"%)");m.find("div.tsk-quote-stack-stock-bid span.tsk-quote-stack-val").text(g(l.bid));m.find("div.tsk-quote-stack-stock-ask span.tsk-quote-stack-val").text(g(l.ask));m.find("div.tsk-quote-stack-stock-volume span.tsk-quote-stack-val").text(l.volume)}}if(parseFloat(l.change)>0){m.addClass("tsk-value-inc").removeClass("tsk-value-dec")}else{if(parseFloat(l.change)<0){m.removeClass("tsk-value-inc").addClass("tsk-value-dec")}else{m.removeClass("tsk-value-inc").removeClass("tsk-value-dec")}}},_trimCompanyName:function(m){var l=this._unescapeHTML(m);var n=document.documentElement.style;if(!("textOverflow" in n||"OTextOverflow" in n)){return(l.length>17)?l.substr(0,17)+"...":l}else{return l}},_unescapeHTML:function(l){return $("<div />").html(l).text()},_getQuotesInStack:function(){var l={};this._quoteStack.children("div").each(function(n,o){var m=$(o);if(m.hasClass("tsk-quote-stack-item")&&!m.hasClass("tsk-quote-stack-header")){l[m.attr("sym")]=m}});return l}};i._create(j);return i}};